{"ast":null,"code":"var _jsxFileName = \"C:\\\\binance-websocket\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n/** @format */\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport CryptoSelector from \"./components/CryptoSelector\";\nimport CryptoChart from \"./components/CryptoChart\";\nimport styled from \"styled-components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n_c = Container;\nconst App = () => {\n  _s();\n  const [selectedSymbol, setSelectedSymbol] = useState(\"ethusdt\"); // Default symbol\n  const [selectedInterval, setSelectedInterval] = useState(\"1m\"); // Default interval\n  const [chartData, setChartData] = useState({\n    datasets: []\n  });\n  const ws = useRef(null);\n  const savedData = useRef({\n    ethusdt: [],\n    bnbusdt: [],\n    dotusdt: []\n  });\n\n  // WebSocket Connection Setup\n  useEffect(() => {\n    if (ws.current) {\n      ws.current.close();\n    }\n    const streamUrl = `wss://stream.binance.com:9443/ws/${selectedSymbol}@kline_${selectedInterval}`;\n    ws.current = new WebSocket(streamUrl);\n    ws.current.onmessage = event => {\n      const message = JSON.parse(event.data);\n      const {\n        k: candlestick\n      } = message;\n      const newCandle = {\n        x: new Date(candlestick.t),\n        o: parseFloat(candlestick.o),\n        h: parseFloat(candlestick.h),\n        l: parseFloat(candlestick.l),\n        c: parseFloat(candlestick.c)\n      };\n\n      // Limit to the latest 100 data points\n      const updatedData = [...savedData.current[selectedSymbol], newCandle];\n      if (updatedData.length > 100) {\n        updatedData.shift(); // Remove the oldest candle if more than 100\n      }\n      savedData.current[selectedSymbol] = updatedData;\n      setChartData({\n        datasets: [{\n          label: `${selectedSymbol.toUpperCase()} Candlestick Data`,\n          data: savedData.current[selectedSymbol],\n          borderColor: \"rgba(75, 192, 192, 1)\",\n          borderWidth: 1\n        }]\n      });\n    };\n    ws.current.onerror = error => {\n      console.error(\"WebSocket error observed:\", error);\n      alert(\"WebSocket connection error. Please try again.\");\n    };\n    return () => ws.current.close();\n  }, [selectedSymbol, selectedInterval]);\n  const handleSymbolChange = symbol => {\n    setSelectedSymbol(symbol);\n    if (savedData.current[symbol].length > 0) {\n      setChartData({\n        datasets: [{\n          label: `${symbol.toUpperCase()} Candlestick Data`,\n          data: savedData.current[symbol],\n          borderColor: \"rgba(75, 192, 192, 1)\",\n          borderWidth: 1\n        }]\n      });\n    }\n  };\n  const handleIntervalChange = interval => {\n    setSelectedInterval(interval);\n    setChartData({\n      datasets: []\n    }); // Clear the current chart data\n    savedData.current[selectedSymbol] = []; // Reset saved data for the currently selected symbol\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Binance Live Market Data\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CryptoSelector, {\n      selectedSymbol: selectedSymbol,\n      onSymbolChange: handleSymbolChange,\n      selectedInterval: selectedInterval,\n      onIntervalChange: handleIntervalChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), chartData.datasets.length > 0 ? /*#__PURE__*/_jsxDEV(CryptoChart, {\n      chartData: chartData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No data to display.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"VzblrG7u4QbE3c33LJ5YuW8PtJY=\");\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","CryptoSelector","CryptoChart","styled","jsxDEV","_jsxDEV","Container","div","_c","App","_s","selectedSymbol","setSelectedSymbol","selectedInterval","setSelectedInterval","chartData","setChartData","datasets","ws","savedData","ethusdt","bnbusdt","dotusdt","current","close","streamUrl","WebSocket","onmessage","event","message","JSON","parse","data","k","candlestick","newCandle","x","Date","t","o","parseFloat","h","l","c","updatedData","length","shift","label","toUpperCase","borderColor","borderWidth","onerror","error","console","alert","handleSymbolChange","symbol","handleIntervalChange","interval","children","fileName","_jsxFileName","lineNumber","columnNumber","onSymbolChange","onIntervalChange","_c2","$RefreshReg$"],"sources":["C:/binance-websocket/src/App.js"],"sourcesContent":["/** @format */\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport CryptoSelector from \"./components/CryptoSelector\";\nimport CryptoChart from \"./components/CryptoChart\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst App = () => {\n  const [selectedSymbol, setSelectedSymbol] = useState(\"ethusdt\"); // Default symbol\n  const [selectedInterval, setSelectedInterval] = useState(\"1m\"); // Default interval\n  const [chartData, setChartData] = useState({ datasets: [] });\n  const ws = useRef(null);\n  const savedData = useRef({ ethusdt: [], bnbusdt: [], dotusdt: [] });\n\n  // WebSocket Connection Setup\n  useEffect(() => {\n    if (ws.current) {\n      ws.current.close();\n    }\n\n    const streamUrl = `wss://stream.binance.com:9443/ws/${selectedSymbol}@kline_${selectedInterval}`;\n    ws.current = new WebSocket(streamUrl);\n\n    ws.current.onmessage = (event) => {\n      const message = JSON.parse(event.data);\n      const { k: candlestick } = message;\n\n      const newCandle = {\n        x: new Date(candlestick.t),\n        o: parseFloat(candlestick.o),\n        h: parseFloat(candlestick.h),\n        l: parseFloat(candlestick.l),\n        c: parseFloat(candlestick.c),\n      };\n\n      // Limit to the latest 100 data points\n      const updatedData = [...savedData.current[selectedSymbol], newCandle];\n      if (updatedData.length > 100) {\n        updatedData.shift(); // Remove the oldest candle if more than 100\n      }\n\n      savedData.current[selectedSymbol] = updatedData;\n\n      setChartData({\n        datasets: [\n          {\n            label: `${selectedSymbol.toUpperCase()} Candlestick Data`,\n            data: savedData.current[selectedSymbol],\n            borderColor: \"rgba(75, 192, 192, 1)\",\n            borderWidth: 1,\n          },\n        ],\n      });\n    };\n\n    ws.current.onerror = (error) => {\n      console.error(\"WebSocket error observed:\", error);\n      alert(\"WebSocket connection error. Please try again.\");\n    };\n\n    return () => ws.current.close();\n  }, [selectedSymbol, selectedInterval]);\n\n  const handleSymbolChange = (symbol) => {\n    setSelectedSymbol(symbol);\n    if (savedData.current[symbol].length > 0) {\n      setChartData({\n        datasets: [\n          {\n            label: `${symbol.toUpperCase()} Candlestick Data`,\n            data: savedData.current[symbol],\n            borderColor: \"rgba(75, 192, 192, 1)\",\n            borderWidth: 1,\n          },\n        ],\n      });\n    }\n  };\n\n  const handleIntervalChange = (interval) => {\n    setSelectedInterval(interval);\n    setChartData({ datasets: [] }); // Clear the current chart data\n    savedData.current[selectedSymbol] = []; // Reset saved data for the currently selected symbol\n  };\n\n  return (\n    <Container>\n      <h1>Binance Live Market Data</h1>\n      <CryptoSelector\n        selectedSymbol={selectedSymbol}\n        onSymbolChange={handleSymbolChange}\n        selectedInterval={selectedInterval}\n        onIntervalChange={handleIntervalChange}\n      />\n      {chartData.datasets.length > 0 ? (\n        <CryptoChart chartData={chartData} />\n      ) : (\n        <p>No data to display.</p>\n      )}\n    </Container>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}